<%- include('../layout/header.ejs') %>

  <main class="main">
    <section class="home-slider position-relative mb-30">
      <div class="container">
        <div class="home-slide-cover bg-grey-10 mt-30">
          <div class="hero-slider-1 style-4 dot-style-1 dot-style-1-position-1">
            <div class="single-hero-slider single-animation-wrap">
              <div class="container">
                <div class="row align-items-center slider-animated-1">
                  <div class="col-lg-5 col-md-6">
                    <div class="hero-slider-content-2">
                      <h4 class="animated">Trade-In Offer</h4>
                      <h3 class="animated fw-900">Supper Value Deals</h3>
                      <h2 class="animated fw-900 text-brand">On All Products</h2>
                      <p class="animated">
                        Save more with coupons & up to 70% off
                      </p>
                      <a class="animated btn btn-brush btn-brush-3" href="shop-product-right.html" tabindex="0">
                        Shop Now
                      </a>
                    </div>
                  </div>
                  <div class="col-lg-7 col-md-6">
                    <div class="single-slider-img single-slider-img-1">
                      <img class="animated" style="padding-top: 35px" src="/imgs/template/img rd 2.png" alt="" />
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="single-hero-slider single-animation-wrap">
              <div class="container">
                <div class="row align-items-center slider-animated-1">
                  <div class="col-lg-5 col-md-6">
                    <div class="hero-slider-content-2">
                      <h4 class="animated">Hot promotions</h4>
                      <h3 class="animated fw-900">Fashion Trending</h3>
                      <h2 class="animated fw-900 text-brand">Great Collection</h2>
                      <p class="animated">
                        Save more with coupons & up to 20% off
                      </p>
                      <a class="animated btn btn-brush btn-brush-1" href="shop-product-right.html" tabindex="0">
                        Get It Now
                      </a>
                    </div>
                  </div>
                  <div class="col-lg-7 col-md-6">
                    <div class="single-slider-img single-slider-img-1">
                      <img class="animated" src="/imgs/template/img-1.png" alt="" />
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="slider-arrow hero-slider-1-arrow"></div>
        </div>
      </div>
    </section>
    <section class="section-padding">
      <div class="container pb-20">
        <h3 class="section-title mb-20 wow fadeIn animated">
          <span>Featured</span> Brands
        </h3>
        <div class="carausel-6-columns-cover position-relative wow fadeIn animated">
          <div class="slider-arrow slider-arrow-2 carausel-6-columns-arrow" id="carausel-6-columns-3-arrows"></div>
          <div class="carausel-6-columns text-center" id="carausel-6-columns-3">
            <div class="brand-logo">
              <img class="img-grey-hover" src="/imgs/banner/brand-1.png" alt="" />
            </div>
            <div class="brand-logo">
              <img class="img-grey-hover" src="/imgs/banner/brand-2.png" alt="" />
            </div>
            <div class="brand-logo">
              <img class="img-grey-hover" src="/imgs/banner/brand-3.png" alt="" />
            </div>
            <div class="brand-logo">
              <img class="img-grey-hover" src="/imgs/banner/brand-4.png" alt="" />
            </div>
            <div class="brand-logo">
              <img class="img-grey-hover" src="/imgs/banner/brand-5.png" alt="" />
            </div>
            <div class="brand-logo">
              <img class="img-grey-hover" src="/imgs/banner/brand-6.png" alt="" />
            </div>
            <div class="brand-logo">
              <img class="img-grey-hover" src="/imgs/banner/brand-3.png" alt="" />
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="product-tabs section-padding position-relative wow fadeIn animated">
      <div class="bg-square"></div>
      <div class="container">
        <div class="tab-header">
          <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item" role="presentation">
              <button class="nav-link active" id="nav-tab-one" data-bs-toggle="tab" data-bs-target="#tab-one"
                type="button" role="tab" aria-controls="tab-one" aria-selected="true">
                Featured
              </button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link" id="nav-tab-two" data-bs-toggle="tab" data-bs-target="#tab-two" type="button"
                role="tab" aria-controls="tab-two" aria-selected="false">
                Popular
              </button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link" id="nav-tab-three" data-bs-toggle="tab" data-bs-target="#tab-three" type="button"
                role="tab" aria-controls="tab-three" aria-selected="false">
                New added
              </button>
            </li>
          </ul>
          <a href="/api/shop" class="view-more d-none d-md-flex">View More<i
              class="fi-rs-angle-double-small-right"></i></a>
        </div>
        <!--End nav-tabs-->
        <div class="tab-content wow fadeIn animated" id="myTabContent">
          <div class="tab-pane fade show active" id="tab-one" role="tabpanel" aria-labelledby="tab-one">
            <div class="row product-grid-4">
              <% if (feature.length> 0) { %> <% for (let i=0; i < feature.length; i++) { %>
                  <div class="col-lg-3 col-md-4 col-12 col-sm-6">
                    <div class="product-cart-wrap mb-30">
                      <div class="product-img-action-wrap">
                        <div class="product-img product-img-zoom">
                          <a href="/api/aProduct?id=<%= feature[i].id %>">
                            <img class="default-img" src="/productimages/<%= feature[i].images[0] %>" alt="" />
                            <img class="hover-img" src="/productimages/<%= feature[i].images[1] %>" alt="" />
                          </a>
                        </div>
                        <div class="product-action-1">
                          <a href="/api/aProduct?id=<%= feature[i].id %>" aria-label="Quick view"
                            class="action-btn hover-up" data-bs-toggle="modal" data-bs-target="#quickViewModal"><i
                              class="fi-rs-eye"></i></a>
                              <a aria-label="Add To Wishlist" class="action-btn hover-up" onclick="wishList('<%= feature[i]._id %>')"><i
                                class="fi-rs-heart"></i></a>

                        </div>
                        <div class="product-badges product-badges-position product-badges-mrg">
                          <span class="hot">Hot</span>
                        </div>
                      </div>
                      <div class="product-content-wrap">
                        <div class="product-category">
                          <a>
                            <%= feature[i].title %>
                          </a>
                        </div>
                        <h2>
                          <a>
                            <%= feature[i].category.name %>
                          </a>
                        </h2>
                        <div class="rating-result" title="">
                          <span>
                            <span></span>
                          </span>
                        </div>
                        <div class="product-price">
                          <span>₹<%=feature[i].price %></span>
                          <span class="old-price">₹<%=feature[i].regularPrice %></span>
                        </div>
                        <div class="product-action-1 show">
                          <a aria-label="Add To Cart" class="float-right action-btn hover-up add-to-cart-btn"
                            onclick="addToCart('<%= feature[i].id %>')">
                            <i class="fi-rs-shopping-bag-add"></i>
                          </a>
                        </div>
                      </div>
                    </div>
                  </div>
                  <% } %>

                    <% } else { %>

                      <% } %>


            </div>
            <!--End product-grid-4-->
          </div>
          <!--En tab one (Featured)-->
          <div class="tab-pane fade" id="tab-two" role="tabpanel" aria-labelledby="tab-two">
            <div class="row product-grid-4">
              <% if (popular.length> 0) { %> <% for (let i=0; i < popular.length; i++) { %>
                  <div class="col-lg-3 col-md-4 col-12 col-sm-6">
                    <div class="product-cart-wrap mb-30">
                      <div class="product-img-action-wrap">
                        <div class="product-img product-img-zoom">
                          <a href="/api/aProduct?id=<%= popular[i].id %>">
                            <img class="default-img" src="/productimages/<%= popular[i].images[0] %>" alt="" />
                            <img class="hover-img" src="/productimages/<%= popular[i].images[1] %>" alt="" />
                          </a>
                        </div>
                        <div class="product-action-1">
                          <a href="/api/aProduct?id=<%= popular[i].id %>" aria-label="Quick view"
                            class="action-btn hover-up" data-bs-toggle="modal" data-bs-target="#quickViewModal"><i
                              class="fi-rs-eye"></i></a>
                              <a aria-label="Add To Wishlist" class="action-btn hover-up" onclick="wishList('<%= popular[i]._id %>')"><i
                                class="fi-rs-heart"></i></a>

                        </div>
                        <div class="product-badges product-badges-position product-badges-mrg">
                          <span class="best">Best Sell</span>
                        </div>
                      </div>
                      <div class="product-content-wrap">
                        <div class="product-category">
                          <a>
                            <%= popular[i].title %>
                          </a>
                        </div>
                        <h2>
                          <a>
                            <%= popular[i].category.name %>
                          </a>
                        </h2>
                        <div class="rating-result" title="">
                          <span>
                            <span></span>
                          </span>
                        </div>
                        <div class="product-price">
                          <span>₹<%=popular[i].price %></span>
                          <span class="old-price">₹<%=popular[i].regularPrice %></span>
                        </div>
                        <div class="product-action-1 show">
                          <a aria-label="Add To Cart" class="float-right action-btn hover-up add-to-cart-btn"
                            onclick="addToCart('<%= popular[i].id %>')">
                            <i class="fi-rs-shopping-bag-add"></i>
                          </a>
                        </div>
                      </div>
                    </div>
                  </div>
                  <% } %>

                    <% } else { %>

                      <% } %>


                        <!--End product-grid-4-->
            </div>
            <!--En tab two (Popular)-->
          </div>

          <div class="tab-pane fade" id="tab-three" role="tabpanel" aria-labelledby="tab-three">
            <div class="row product-grid-4">
              <% if (product.length> 0) { %> <% for (let i=0; i < product.length; i++) { %>
                  <div class="col-lg-3 col-md-4 col-12 col-sm-6">
                    <div class="product-cart-wrap mb-30">
                      <div class="product-img-action-wrap">
                        <div class="product-img product-img-zoom">
                          <a href="/api/aProduct?id=<%= product[i].id %>">
                            <img class="default-img" src="/productimages/<%= product[i].images[0] %>" alt="" />
                            <img class="hover-img" src="/productimages/<%= product[i].images[1] %>" alt="" />
                          </a>
                        </div>
                        <div class="product-action-1">
                          <a href="/api/aProduct?id=<%= product[i].id %>" aria-label="Quick view"
                            class="action-btn hover-up" data-bs-toggle="modal" data-bs-target="#quickViewModal"><i
                              class="fi-rs-eye"></i></a>
                          <a aria-label="Add To Wishlist" class="action-btn hover-up" onclick="wishList('<%= product[i]._id %>')"><i
                              class="fi-rs-heart"></i></a>

                        </div>
                        <div class="product-badges product-badges-position product-badges-mrg">
                          <span class="new">New</span>
                        </div>
                      </div>
                      <div class="product-content-wrap">
                        <div class="product-category">
                          <a>
                            <%= product[i].title %>
                          </a>
                        </div>
                        <h2>
                          <a>
                            <%= product[i].category.name %>
                          </a>
                        </h2>
                        <div class="rating-result" title="">
                          <span>
                            <span></span>
                          </span>
                        </div>
                        <div class="product-price">
                          <span>₹<%=product[i].price %></span>
                          <span class="old-price">₹<%=product[i].regularPrice %></span>
                        </div>
                        <div class="product-action-1 show">
                          <a aria-label="Add To Cart" class="float-right action-btn hover-up add-to-cart-btn"
                            onclick="addToCart('<%= product[i].id %>')">
                            <i class="fi-rs-shopping-bag-add"></i>
                          </a>
                        </div>
                      </div>
                    </div>
                  </div>
                  <% } %>

                    <% } else { %>

                      <% } %>


                        <!--End product-grid-4-->
            </div>
            <!--En tab three (New added)-->
          </div>
          <!--End tab-content-->
        </div>
    </section>
    <section class="banner-2 section-padding pb-0">
      <div class="container">
        <div class="banner-img banner-big wow fadeIn animated f-none">
          <img src="/imgs/banner/banner-4.png" alt="" />
          <div class="banner-text d-md-block d-none">
            <h4 class="mb-15 mt-40 text-brand">Repair Services</h4>
            <h1 class="fw-600 mb-20">
              We're an Apple <br />Authorised Service Provider
            </h1>
            <a href="shop-grid-right.html" class="btn">Learn More <i class="fi-rs-arrow-right"></i></a>
          </div>
        </div>
      </div>
    </section>
    <section class="popular-categories section-padding mt-15">
      <div class="container wow fadeIn animated">
        <h3 class="section-title mb-20"><span>Popular</span> Categories</h3>
        <div class="carausel-6-columns-cover position-relative">
          <div class="slider-arrow slider-arrow-2 carausel-6-columns-arrow" id="carausel-6-columns-arrows"></div>
          <div class="carausel-6-columns" id="carausel-6-columns">
            <div class="card-1">
              <figure class="img-hover-scale overflow-hidden">
                <a href="shop-grid-right.html"><img src="/imgs/shop/category-thumb-1.jpg" alt="" /></a>
              </figure>
              <h5><a href="shop-grid-right.html">T-Shirt</a></h5>
            </div>
            <div class="card-1">
              <figure class="img-hover-scale overflow-hidden">
                <a href="shop-grid-right.html">
                  <img src="/imgs/shop/category-thumb-2.jpg" alt="" /></a>
              </figure>
              <h5><a href="shop-grid-right.html">Bags</a></h5>
            </div>
            <div class="col-lg-4 col-md-6">
              <figure class="img-hover-scale overflow-hidden">
                <a href="shop-grid-right.html"><img src="/imgs/shop/category-thumb-3.jpg" alt="" /></a>
              </figure>
              <h5><a href="shop-grid-right.html">Sandan</a></h5>
            </div>
           
          </div>
        </div>
      </div>
    </section>
    <section class="banners mb-20">
      <div class="container">
        <div class="row">
          <div class="col-lg-4 col-md-6">
            <div class="banner-img wow fadeIn animated">
              <img src="/imgs/banner/banner-1.png" alt="" />
              <div class="banner-text">
                <span>Smart Offer</span>
                <h4>Save 20% on <br />Woman Bag</h4>
                <a href="shop-grid-right.html">Shop Now <i class="fi-rs-arrow-right"></i></a>
              </div>
            </div>
          </div>
          <div class="col-lg-4 col-md-6">
            <div class="banner-img wow fadeIn animated">
              <img src="/imgs/banner/banner-2.png" alt="" />
              <div class="banner-text">
                <span>Sale off</span>
                <h4>Great Summer <br />Collection</h4>
                <a href="shop-grid-right.html">Shop Now <i class="fi-rs-arrow-right"></i></a>
              </div>
            </div>
          </div>
          <div class="col-lg-4 d-md-none d-lg-flex">
            <div class="banner-img wow fadeIn animated mb-sm-0">
              <img src="/imgs/banner/banner-3.png" alt="" />
              <div class="banner-text">
                <span>New Arrivals</span>
                <h4>Shop Today’s <br />Deals & Offers</h4>
                <a href="shop-grid-right.html">Shop Now <i class="fi-rs-arrow-right"></i></a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="pt-25 pb-15">
      <div class="container wow fadeIn animated">
        <h3 class="section-title mb-20"><span>New</span> Arrivals</h3>
        <div class="carausel-6-columns-cover position-relative">
          <div class="slider-arrow slider-arrow-2 carausel-6-columns-arrow" id="carausel-6-columns-2-arrows"></div>
          <div class="carausel-6-columns carausel-arrow-center" id="carausel-6-columns-2">
            <% if (product.length> 0) { %> <% for (let i=0; i < product.length;i++) { %>
                <div class="product-cart-wrap small hover-up">
                  <div class="product-img-action-wrap">
                    <div class="product-img product-img-zoom">
                      <a href="/api/aProduct?id=<%= product[i].id %>">
                        <img class="default-img" src="/productimages/<%= product[i].images[0] %>" alt="" />
                        <img class="hover-img" src="/productimages/<%= product[i].images[2] %>" alt="" />
                      </a>
                    </div>
                    <div class="product-action-1">
                      <a aria-label="Quick view" class="action-btn hover-up" data-bs-toggle="modal"
                        data-bs-target="#quickViewModal"><i class="fi-rs-eye"></i></a>
                      <a aria-label="Add To Wishlist" class="action-btn hover-up"
                        onclick="wishList('<%= product[i]._id %>')"><i class="fi-rs-heart"></i></a>
                    </div>
                    <div class="product-badges product-badges-position product-badges-mrg">
                      <span class="hot">New</span>
                    </div>
                  </div>
                  <div class="product-content-wrap">
                    <h2><a href="#">
                        <%= product[i].title %>
                      </a></h2>
                    <div class="rating-result" title="90%">
                      <span> </span>
                    </div>
                    <div class="product-price">
                      <span>₹<%=product[i].price %> </span>
                      <span class="old-price">₹<%= Math.round(product[i].regularPrice) %></span>
                    </div>
                  </div>
                </div>

                <% } %>
                  <% } else { %>
                    <tr>
                      <td colspan="2">Product not found</td>
                    </tr>
                    <% } %>
          </div>
        </div>
      </div>
    </section>

    <section class="mb-50">
      <div class="container">
        <div class="row">
          <div class="col-12">
            <div class="banner-bg wow fadeIn animated" style="background-image: url('/imgs/banner/banner-8.jpg')">
              <div class="banner-content">
                <h5 class="text-grey-4 mb-15">Shop Today’s Deals</h5>
                <h2 class="fw-600">
                  Happy <span class="text-brand">Mother's Day</span>. Big Sale Up
                  to 40%
                </h2>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="featured section-padding">
      <div class="container pb-25">
        <div class="row">
          <div class="col-lg-2 col-md-4 mb-md-3 mb-lg-0">
            <div class="banner-features wow fadeIn animated hover-up">
              <img src="/imgs/theme/icons/feature-1.png" alt="" />
              <h4 class="bg-1">Free Shipping</h4>
            </div>
          </div>
          <div class="col-lg-2 col-md-4 mb-md-3 mb-lg-0">
            <div class="banner-features wow fadeIn animated hover-up">
              <img src="/imgs/theme/icons/feature-2.png" alt="" />
              <h4 class="bg-3">Online Order</h4>
            </div>
          </div>
          <div class="col-lg-2 col-md-4 mb-md-3 mb-lg-0">
            <div class="banner-features wow fadeIn animated hover-up">
              <img src="/imgs/theme/icons/feature-3.png" alt="" />
              <h4 class="bg-2">Save Money</h4>
            </div>
          </div>
          <div class="col-lg-2 col-md-4 mb-md-3 mb-lg-0">
            <div class="banner-features wow fadeIn animated hover-up">
              <img src="/imgs/theme/icons/feature-4.png" alt="" />
              <h4 class="bg-4">Promotions</h4>
            </div>
          </div>
          <div class="col-lg-2 col-md-4 mb-md-3 mb-lg-0">
            <div class="banner-features wow fadeIn animated hover-up">
              <img src="/imgs/theme/icons/feature-5.png" alt="" />
              <h4 class="bg-5">Happy Sell</h4>
            </div>
          </div>
          <div class="col-lg-2 col-md-4 mb-md-3 mb-lg-0">
            <div class="banner-features wow fadeIn animated hover-up">
              <img src="/imgs/theme/icons/feature-6.png" alt="" />
              <h4 class="bg-6">24/7 Support</h4>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <script>
    function wishList(id) {
      $.ajax({
        url: `/api/addToList?id=${id}`,
        method: "get",
        success: (response) => {
          if (response.status) {
            Swal.fire(
              {
                title: "ADDED TO WISHLIST",
                text: "You seleted a Product to the wisslist",
                icon: "success",
                timer: 3000,
              },
              location.reload()
            );
          } else {
            Swal.fire({
              title: "ALREADY SELECTED!",
              text: "You already selected",
              icon: "error",
              timer: 3000,
            });
          }
        },
      });
    }
  </script>
  <script>
    function addToCart(id) {
      $.ajax({
        url: `/api/addToCart?id=${id}`,
        method: "get",
        success: (response) => {
          if (response.status) {
            Swal.fire({
              title: "ADD TO CART",
              text: "Product Added to cart",
              icon: "success",
              timer: 1000,
              showConfirmButton: false, // This removes the button
            }).then(() => {
              location.reload(); // Reload the page after adding the product to the cart
            });
          } else {
            if (response.error === "Product already in the cart") {
              // Handle case where the product is already in the cart
              Swal.fire({
                title: "ALREADY SELECTED!",
                text: "The Product You already selected",
                icon: "error",
                showCancelButton: true,
                confirmButtonColor: "#3085d6",
                cancelButtonColor: "#d33",
                confirmButtonText: "Go to Cart",
              }).then((result) => {
                if (result.isConfirmed) {
                  window.location.href = "/api/cart"; // Redirect the user to the cart page
                }
              });
            } else if (response.error === "Product out of stock") {
              // Handle case where the product is out of stock
              Swal.fire({
                title: "OUT OF STOCK!",
                text: "The Product is out of stock",
                icon: "error",
                showConfirmButton: true,
              });
            }
          }
        },
      });
    }
  </script>

  <%- include('../layout/footer.ejs' )%>